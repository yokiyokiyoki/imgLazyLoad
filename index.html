<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>懒加载</title>
    <link rel="stylesheet" href="./src/index.css">
</head>

<body>
    <div id="app">
        <div class="load img">尚未出现在视窗，加载的是默认图片</div>
    </div>
    <script>
        let imgArr = Array(100).fill('image')


        let images = document.getElementsByClassName('img')
        let app = document.getElementById('app')
        imgArr.forEach((item) => {
            let div = document.createElement('div')
            div.classList = 'load img'
            div.innerText = '尚未出现在视窗（我是默认图片）'
            app.appendChild(div)
        })

        window.onscroll = function (e) {
            let scrollTop = document.documentElement.scrollTop
            let windowHeight = window.innerHeight
            //懒加载
            for (let i = 0; i < images.length; i++) {
                let imgHeight = images[i].offsetTop
                // console.log(imgHeight, scrollTop, windowHeight)
                if (imgHeight < scrollTop + windowHeight) {
                    setTimeout(() => {
                        images[i].innerText = '出现在视窗（这是正确的图片）'
                    }, 1000)
                }
            }
        }

        console.log(images, imgArr, app)
    </script>
</body>

</html>